<div class="container pt-4 pb-4">
    <app-create-module-manual (onSuccessfulSubmission)="ngOnInit()"></app-create-module-manual>

    <hr>

    <p-dataView #dv [value]="moduleManuals" [paginator]="true" [rows]="5" [sortField]="sortField" [sortOrder]="sortOrder"
    [emptyMessage]="emptyMessage" filterBy="spo.course">

        <!--Data-View Headerleiste-->
        <ng-template pTemplate="header">
          <div class="d-flex flex-row justify-content-between">
            <span class="p-input-icon-left mb-2 md:mb-0">
              <i class="pi pi-search"></i>
              <input type="search" pInputText placeholder="Studienfach" id="input-search" (input)="dv.filter($event.target.value, 'contains')">
            </span>
            <p-dropdown [options]="sortOptions" [(ngModel)]="sortKey" placeholder="Sortieren nach" id="dropdown-sort"
            (onChange)="onSortChange($event)" [style]="{'min-width':'15em'}"></p-dropdown>
          </div>
        </ng-template>

        <!-- Data-View Modulhandbuch-Liste-->
        <ng-template let-moduleManual let-i="rowIndex" pTemplate="listItem">
            <div class="block p-3">

                <!-- Overlay-Link für ein Listen-Element, umfasst gesamten "inner"-Block -->
                <a class="overlay" [routerLink]="['/manual-edit', moduleManual.id]" id="link-manual-{{i}}"></a>

                <div class="inner list-group-item d-flex justify-content-between align-items-start">
                    <div class="me-auto">

                        <!-- MH-Titel -->
                        <div class="fw-bold fs-5">{{moduleManual.spo.degree}} {{moduleManual.spo.course}}</div>

                        <!-- MH-Zeitraum -->
                        <div *ngIf="moduleManual.spo.endDate === null; else endDate" class="fs-6 ms-4">
                            Gültig für das <i>{{moduleManual.semester}}</i>.
                            <br>
                            Für Studienanfänger ab dem <i>{{getGermanDate(moduleManual.spo.startDate)}}</i>
                        </div>
                        <ng-template #endDate>
                            <div class="fs-6  ms-4">
                              Gültig für das <i>{{moduleManual.semester}}</i>.
                              <br>
                              Für Studienanfänger im Zeitraum <i>{{getGermanDate(moduleManual.spo.startDate)}} - {{getGermanDate(moduleManual.spo.endDate)}}</i>
                            </div>
                        </ng-template>

                        <!-- MH-SPO-Link -->
                        <a href="{{moduleManual.spo.link}}" class="ms-4 link-secondary d-block" id="link-spo-{{i}}">
                            <i class="bi bi-link-45deg"></i><small>zur Studien- und Prüfungsordnung</small>
                        </a>
                    </div>

                    <!-- MH-Semester-->
                    <button type="button" class="btn btn-outline-secondary pb-1 pt-1" id="btn-pdf-{{i}}" (click)="onGeneratePdfClick(moduleManual.id)">
                      <i class="bi bi-filetype-pdf fs-5"></i>
                      PDF
                    </button>
                </div>
            </div>
        </ng-template>
        <!--<ng-template let-moduleManual pTemplate="gridItem">
            <div class="col-12 md:col-3">
                {{moduleManual.spo.course}}
            </div>
        </ng-template>-->
    </p-dataView>
</div>

